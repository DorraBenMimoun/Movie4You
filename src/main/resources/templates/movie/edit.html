<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8">
  <title>Modifier un Film</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">

</head>
<body>

<!-- Barre de navigation -->
<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
  <div class="container">
    <a class="navbar-brand fw-bold" href="/">Movie4You</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item">
          <a class="nav-link" href="/movie/all">Films</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/cinema/all">Cinémas</a>
        </li>
        <li class="nav-item" th:if="${session.roles != null and #lists.contains(session.roles, 'ROLE_ADMIN')}">
          <a class="nav-link" href="/seance/all">Seances</a>
        </li>
        <li class="nav-item" th:if="${session.roles != null and #lists.contains(session.roles, 'ROLE_ADMIN')}">
          <a class="nav-link" href="/signalements/all">Signalements</a>
        </li>

        <li class="nav-item" th:if="${session.username == null}">
          <a class="nav-link" href="/users/register">S'inscrire</a>
        </li>
        <li class="nav-item" th:if="${session.username == null}">
          <a class="nav-link" href="/users/login">Se connecter</a>
        </li>
        <li class="nav-item" th:if="${session.roles != null and #lists.contains(session.roles, 'ROLE_USER')}">
          <a class="nav-link" href="/users/user">Profil</a>
        </li>
        <li class="nav-item" th:if="${session.username != null}">
          <a href="/users/logout" class="btn btn-danger btn-sm">Se déconnecter</a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<div class="container my-5">
  <h3>Modifier un Film</h3>
  <div class="card">
    <div class="card-body">
      <form th:action="@{/movie/edit/{id}(id=${movie.id})}" th:object="${movie}" method="post" enctype="multipart/form-data">

        <!-- Nom du film -->
        <div class="form-group">
          <label for="name">Nom du Film</label>
          <input type="text" th:field="*{name}" class="form-control" id="name" placeholder="Nom du film">
        </div>

        <!-- Affiche actuelle -->
        <div class="form-group">
          <label >Affiche actuelle :</label><br>
          <img th:src="@{/uploads/{filename}(filename=${movie.posters})}" alt="Affiche actuelle" width="100" />
        </div>

        <!-- Nouvelle affiche -->
        <div class="form-group">
          <label for="posterFile">Nouvelle Affiche (Optionnel) :</label>
          <input type="file" name="posterFile" class="form-control" accept="image/*" />
        </div>

        <!-- Autres champs (durée, genre, synopsis, etc.) -->
        <div class="form-group">
          <label for="releaseDate">Date de Sortie</label>
          <input type="date" th:field="*{releaseDate}" class="form-control" id="releaseDate">
        </div>

        <div class="form-group">
          <label for="duration">Durée (minutes)</label>
          <input type="number" th:field="*{duration}" class="form-control" id="duration" placeholder="Durée">
        </div>

        <div class="form-group">
          <label for="rateImdb">Note IMDB</label>
          <input type="text" th:field="*{rateImdb}" class="form-control" id="rateImdb" placeholder="Note IMDB">
        </div>

        <div class="form-group">
          <label for="rateUser">Note Utilisateur</label>
          <input type="text" th:field="*{rateUser}" class="form-control" id="rateUser" placeholder="Note Utilisateur">
        </div>

        <div class="form-group">
          <label for="genre">Genre</label>
          <input type="text" th:field="*{genre}" class="form-control" id="genre" placeholder="Genre">
        </div>

        <div class="form-group">
          <label for="plots">Synopsis</label>
          <input type="text" th:field="*{plots}" class="form-control" id="plots" placeholder="Synopsis">
        </div>

        <div class="form-group">
          <label for="actors">Acteurs</label>
          <input type="text" th:field="*{actors}" class="form-control" id="actors" placeholder="Acteurs">
        </div>

        <div class="form-group">
          <label for="bandeAnnonce">Bande-Annonce (URL)</label>
          <input type="text" th:field="*{bandeAnnonce}" class="form-control" id="bandeAnnonce" placeholder="URL de la bande-annonce">
        </div>

        <div class="form-group">
          <label for="realisateur">Réalisateur</label>
          <input type="text" th:field="*{realisateur}" class="form-control" id="realisateur" placeholder="Réalisateur">
        </div>

        <button type="submit" class="btn btn-primary">Modifier</button>
      </form>
    </div>
  </div>
</div>
</body>
</html>
